sonarqube-check:

  image:

    name: sonarsource/sonar-scanner-cli:latest

    entrypoint: [""]

  variables:

    SONAR_TOKEN: "sqp_89cd19e7990e2ebe6f9077ba9f4d0ffa488c0b27"

    SONAR_USER_HOME: "${CI_PROJECT_DIR}/.sonar"  # Defines the location of the analysis task cache

    GIT_DEPTH: "0"  # Tells git to fetch all the branches of the project, required by the analysis task

  cache:

    key: "${CI_JOB_NAME}"

    paths:

      - .sonar/cache

  tags:

    - sonarqube

  script:

    - sonar-scanner

  allow_failure: true

  only:

    - main # or the name of your main branch